<!doctype html>
<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>(An)sprechende Anwendungen mit Alexa</title>

<meta name="description" content="(An)sprechende Anwendungen mit Alexa">
<meta name="author" content="Frank Pommerening">

<link rel="stylesheet" href="./common/css/reveal.css">
<link rel="stylesheet" href="./common/css/global.css">
<link rel="stylesheet" href="./common/css/theme/black.css" id="theme">

<!-- Theme used for syntax highlighting of code -->
<link rel="stylesheet" href="./common/lib/css/zenburn.css">

<!-- Printing and PDF exports -->
<script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? './common/css/print/pdf.css' : './common/css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
</script>

<body>
    <div class="reveal">
        <div class="slides">
            <section>
                <h1>(An)sprechende Anwendungen mit Alexa</h1>
                <h2>Spartakiade 2018</h2>
                <img src="images/logo_spartakiade.png" style="border: 0px;background: transparent;height:250px" />
            </section>
            <section>
                <section>
                    <h2>Frank Pommerening</h2>
                    <img src="images/fp.jpg" style="border:0px;width:175px">
                    <ul>
                        <li>Senior - Softwareentwickler</li>
                        <li>Consultant</li>
                        <li>Softwarearchitekt</li>
                    </ul>
                    <br />
                    <br />
                    <a href="mailto:frank@pommerening-online.de">frank@pommerening-online.de</a>
                </section>
                <section data-background="images/axp.svg">

                    AXP Consulting GmbH & Co. KG in Leipzig
                    <br/> Gründung: Mai 2012
                    <br /> Anzahl Mitarbeiter: 8 feste
                    <br/> Branchenfokus: Energiebranche
                    <br/>
                    <br/>
                    <br/>
                    <ul>
                        <li>Consulting (fachlich & IT)
                            <ul>
                                <li>Requirements Engineering / Projektmanagement </li>
                                <li>IT-Fachprozess-Analyse / Dokumentation</li>
                            </ul>
                        </li>
                        <li>Software-Entwicklung
                            <ul>
                                <li>Microservices, SOA, REST, OOA und OOD</li>
                                <li>Microsoft Technologien z.B. .NET (C#), WPF, WCF</li>
                                <li>Datenbanken (MS SQL Server / Oracle / MongoDB)
                            </ul>
                            </li>
                    </ul>
                </section>
            </section>
            <section>
                <section>
                    <h2>Amazon Developer Console
                        <br/> Alexa Skill Kit</h2>
                </section>
                <section>
                    <h4>Entwicklerportal öffen</h4>
                    <a href="https://developer.amazon.com/de/alexa" target="_blank">https://developer.amazon.com/de/alexa</a>
                    <img src="images/dev-portal-start.png" style="border: 0px;background: transparent;height:450px" />
                </section>
                <section>
                    <h4>Anmelden mit Amazon-Konto</h4>
                    <img src="images/dev-portal-auth.png" style="border: 0px;background: transparent;height:400px" />
                    <br/> Für die Verwendung eigener Alexa-Geräte muss das zugehörige Konto verwendet werden.
                </section>
                <section>
                    <h4> Konsole öffnen</h4>
                    <img src="images/dev-portal-open-console.png" style="border: 0px;background: transparent;height:450px" />
                    <br/> Hinweis: die folgenden Beispiele verwenden ausschließlich das neue Portal.
                </section>
                <section>
                    <h4>Übersicht der Skills</h4>
                    <img src="images/dev-portal-skill-list.png" style="border: 0px;background: transparent;height:450px" />
                </section>
            </section>
            <section>
                <section>
                    <h2>Interaction Modell</h2>
                    <h3>Spracherkennung</h3>
                </section>
                <section>
                    <h4>Skill erstellen</h4>
                    Name und Sprache auswählen.
                    <br/> Wichtig: der Name steht in keiner Beziehung zum Aufruf!
                    <img src="images/dev-portal-new-skill-name.png" style="border: 0px;background: transparent;height:450px" />
                </section>
                <section>
                    <h4>Auswahl Skill-Typ</h4>
                    <img src="images/dev-portal-new-skilltype-selected.png" style="border: 0px;background: transparent;height:450px" />
                </section>
                <section>
                    <h4>Auswahl Skill-Typ</h4>
                    <img src="images/dev-portal-new-skilltype-selected.png" style="border: 0px;background: transparent;height:450px" />
                </section>
                <section>
                    <h4>Console - Übersicht</h4>
                    Änderungen am Interaction Modell müssen gespeichert und gebaut werden.
                    <br/>
                    <img src="images/dev-portal-overview.png" style="border: 0px;background: transparent;height:450px" />
                </section>
                <section>
                    <h3>Invocation Name (Skill-Aufruf)</h3>
                    Vorgabe / Limitierungen
                    <img src="images/dev-portal-invocation.png" style="border: 0px;background: transparent;height:350px;float:right" />
                    <ul>
                        <li>nur Kleinbuchstaben</li>
                        <li>Zahlen müssen ausgeschrieben
                            <br/> sein z.B. 2 - zwei</li>
                        <li>keine Start-Formulierung
                            <br/> wie Starte, Lade, Sage ...</li>
                        <li>keine Weck-Formulierung
                            <br/>wie Alexa, Computer, Echo ...</li>
                    </ul>
                </section>
                <section>
                    <h3>Intents
                        <a href="https://developer.amazon.com/de/docs/custom-skills/use-the-skill-builder-beta-to-define-intents-slots-and-dialogs.html#intents-slots-dialogs"
                            target="_blank" class="infolink"></a>
                    </h3>
                    Technische Bezeichnungen der Befehle innerhalb des Skills.
                    <br />
                    <img src="images/dev-portal-intents-list.png" style="border: 0px;background: transparent;height:450px" />
                </section>
                <section>
                    <h4>Eigene Intents</h4>
                    <img src="images/dev-portal-intent-new.png" style="border: 0px;background: transparent;height:250px" />
                    <br /> Vorgabe / Limitierungen
                    <br />
                    <ul>
                        <li>nur Kleinbuchstaben</li>
                        <li>keine Sonderzeichen - außer Unterstrich</li>
                        <li>keine Leerzeichen oder Zahlen</li>
                    </ul>
                </section>
                <section>
                    <h4>Standard-Intents</h4>
                    <img src="images/dev-portal-intent-default.png" style="border: 0px;background: transparent;height:450px;float:right" /> Standard-Befehle werden inkl. Redewendungen durch Amazon bereitgestellt. Diese müssen, soweit noch nicht
                    vorhanden, zugeordnet werden.
                    <br />
                    <br /> Beispiele
                    <br/>
                    <ul>
                        <li>AMAZON.YesIntent</li>
                        <li>AMAZON.NoIntent</li>
                        <li>AMAZON.HelpIntent</li>
                        <li>AMAZON.StopIntent</li>
                    </ul>
                </section>
                <section>
                    <h3>Utterances (Redewendungen)</h3>
                    <img src="images/dev-portal-utterance-new.png" style="border: 0px;background: transparent;height:150px;float:right" /> Zuordnung umgangssprachlicher Formulierung(en) zum Intent. Je mehr Formulierungen um so besser die Benutzerinteraktion.
                    <img src="images/dev-portal-utterance-slot.png" style="border: 0px;background: transparent;height:350px;float:left" />
                    <br />
                    <br /> In der Formulierung können Platzhalter (Slots) definiert werden. Jedem Slot ist ein Slot-Type zuzugeordnet.
                    <br
                    /> Die Definition der Slots gilt je Intent.
                    <img src="images/dev-portal-utterance-slots.png" style="border: 0px;background: transparent;height:150px;" />
                </section>
                <section>
                    <h3>Slot Types (BuildIn)</h3>
                    Die Auswahl Build-Slot-Types ist abhängig von der Sprache.
                    <br/>
                    <br/> Beispiel
                    <i>AMAZON.Actor</i> ist nur in Englisch (US) verfübar.
                    <br /> Die Liste z.B. Städte oder Vornamen werden durch Amazon bereitgestellt - können aber erweiteret werden.
                    <br/>
                    <br /> Der Sondertyp
                    <i>AMAZON.SearchQuery</i> erlaubt einen Platzhalter ohne vordefinierte Werte. Je Intent ist nur ein Platzhalter
                    des Types zulässig.
                </section>
                <section>
                    <h4>Zahlen, Daten, Zeiten</h4>
                    <table>
                        <tbody>
                            <tr>
                                <th>Name</td>
                                    <th>Bedeutung</th>
                                    <th>Beispiele</th>
                            </tr>
                            <tr>
                                <td>AMAZON.DATE</td>
                                <td>Datum im ISO-8061 Format</td>
                                <td>Heute, Morgen, nächste Woche, dieses Jahr</td>
                            </tr>
                            <tr>
                                <td>AMAZON.Time</td>
                                <td>Zeit im ISO-8061 Format</td>
                                <td>Jetzt, Mitternacht, drei Uhr</td>
                            </tr>
                            <tr>
                                <td>AMAZON.DURATION</td>
                                <td>Zeitraum im ISO-8061 Format</td>
                                <td>drei Tage, acht Wochen, zehn Minuten</td>
                            </tr>
                            <tr>
                                <td>AMAZON.NUMBER</td>
                                <td>Zahlen</td>
                                <td>eins, dreiundzwanzig</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <section>
                    <h4>Listen</h4>
                    Die erkannten Werte der Listen sind immer kleingeschrieben.
                    <table>
                        <tbody>
                            <tr>
                                <th>Name</td>
                                    <th>Bedeutung</th>
                                    <th>Beispiele</th>
                            </tr>
                            <tr>
                                <td>AMAZON.DE_REGION</td>
                                <td>dt. geografische Regionen</td>
                                <td>sachsen</td>
                            </tr>
                            <tr>
                                <td>AMAZON.DE_CITY</td>
                                <td>dt. Städte</td>
                                <td>berlin, leipzig</td>
                            </tr>
                            <tr>
                            <td>AMAZON.EUROPE_CITY</td>
                                    <td>Städte (Europa / Welt)</td>
                                    <td>london, paris</td>
                                </tr>
                            <tr>
                                <td>AMAZON.DE_FIRST_NAME</td>
                                <td>deutsche Vornamen</td>
                                <td>frank, anna</td>
                            </tr>
                            <tr>
                                <td>AMAZON.US_FIRST_NAME</td>
                                <td>englische Vornamen</td>
                                <td>steve, opera</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <section>
                    <h3>Slot Types (Custom)</h3>
                    <img src="images/dev-portal-slottype-new.png" style="border: 0px;background: transparent;height:150px;float:right" />
                    Als Ergänzung können einige Slot-Types definiert werden.<br /> 
                    
                    Vorgaben: Buchstaben oder Unterstriche
                    <img src="images/dev-portal-slottype-items.png" style="border: 0px;background: transparent;height:350px;float:left" />
                    <br />
                    <br />
                    Synonyme und Id sind dabei optional.
                    <br/>
                    <br/>
                    Slot-Types werden auf Skill-Ebene verwaltet.
                </section>
                <section>
                    <h3>Endpoint</h3>
                    Der Endpunkt stellt die Verbindung zur Sprachverarbeitung dar. 
                    <br />
                    <br />
                    <h4>Amazon AWS Lambda </h4>
                    <img src="images/dev-portal-endpoint-aws.png" style="border: 0px;background: transparent;height:400px;" />
                </section>
                <section>
                        <h4>Endpoint (HTTPS)</h4>
                        Erlaubt die Verwendung eines beliebigen Endpunkts z.B. Azure Function.
                        <img src="images/dev-portal-endpoint-https.png" style="border: 0px;background: transparent;height:450px;" />
                </section>
                <section>
                    <h3>Szenario Build-Status</h3>
                    Ziel: Skill nennt den aktuellen Build-Status<br/><br/>
                    Intent: buildstatus <br />
                    HTTPS-Endpoint : https://alexa.openfaas-dotnet.de/function/sparta-alexa-build
                </section>
                <section>
                    <h3>Szenario Scrum-Planer (Interaction Modell)</h3>
                    Es soll eine Voice-UI zur Planung der Scum-Meeting erstellt werden.<br />
                    Das Entwickler-Team soll<br />
                    <ul>
                        <li>Termine erstellen</li>
                        <li>Termin(e) nennen</li>
                        <li>Mitarbeiter zum Termin einladen</li>
                        <li>Mitarbeiter aus Termin entfernen</li>
                    </ul>
                    <br />
                    <br />
                    Randbedingungen<br/>
                    Srum-Meetings: Sprint Planning, Sprint Retrospective und Sprint Review<br />
                    Jeder Mitarbeiter ist per Vorname eindeutig zu identifizieren.
                </section>
            </section>
            <section>
                <section>
                    <h2>Backends</h2>
                </section>
                <section>
                    <h3>Amazon AWS Lambdas</h3>
                </section>
                <section>
                    <h3>Microsoft Azure Functions</h3>
                </section>
                <section>
                    <h3>OpenFaaS</h3>
                </section>
            </section>
            <section>
                <section>
                    <h2>Backends</h2>
                </section>
                <section>
                    <h4>Aktivierung Test für Skill</h4>
                    Vor dem Testen muss der Skill dafür aktiviert werden.<br />
                    <img src="images/dev-portal-test-disabled.png" style="border: 0px;background: transparent;height:350px;" />
                </section>
                <section>
                        <h4>Testconsole</h4>
                        <img src="images/dev-portal-test-console.png" style="border: 0px;background: transparent;height:550px;" />
                </section>
                <section>
                        <h4>Testeingabe</h4>
                        Die Eingabe erfolgt per<br />
                        <ul>
                            <li>per Texteingabe</li>
                            <li>per Sprache (Verwendung des System-Mikrofon)</li>
                            <li>als manuelles JSON</li>
                        </ul>
                        <br />
                        <br />
                        Auf Alexa-Geräten die dem eigenen Account zugeordnet sind, kann getestet werden auch ohne Veröffentlichung des Skills.

                        <br />
                        <br />
                        Nach Eingabe der Informationen zur Veröffentlichung können Beta-Tester eingeladen werden.
                </section>
                <section>
                    <h4>Sprachausgaben</h4>
                    Im Bereich Voice & Tone können Sprachausgaben inkl. SSML erprobt werden. 
                    <br />
                    <img src="images/dev-portal-speech-test.png" style="border: 0px;background: transparent;height:350px;" />
                    <br />
                    Die Aussprache unterscheidet sich ja nach gewählter Sprache.
                </section>
                <section>
                    <h4>Beta-Tests</h4>
                    Nach Eingabe der Informationen zur Veröffentlichung können Beta-Tester eingeladen werden. <br />
                    <img src="images/dev-portal-beta-test.png" style="border: 0px;background: transparent;height:500px;" />
                </section>        
            </section>
            <section>
                <section>
                    <h2>Spracheverarbeitung</h2>
                </section>
                <section>
                    <h3>SSML (Speech Synthesis Markup Language) <a href="https://developer.amazon.com/de/docs/custom-skills/speech-synthesis-markup-language-ssml-reference.html"
                        target="_blank" class="infolink"></a></h3>
                    Neben reinem Text kann mittels SSML Einfluss auf die Sprachausgabe genommen werden und Effekte ergänzt werden.
                    <br />
                    <br />
<h4>Flüstern</h4>
                    <pre><code class="xml"><speak>
    Anderer Text
    <amazon:effect name="whispered">Text ganz leise.</amazon:effect>.
    Weiterer Text
</speak></code></pre>
<h4>Pausen</h4>
<pre><code class="xml"><speak>
        Woll'n mal überlegen <break time="2s" > </break>
        Ja <break strength="medium"> </break> ich nehm das Steak.
</speak></code></pre>

                </section>
                <section>
                        <h4>Telefonnummern</h4>
                        <pre><code class="xml"><speak>
        <say-as interpret-as="telephone">035125613710</say-as>
</speak></code></pre>
<h4>Datumswerte</h4>
<pre><code class="xml"><speak>
        <say-as interpret-as="date">2005-02-29</say-as>
</speak></code></pre>
<h4>Buchstabieren</h4>
<pre><code class="xml"><speak>
        <say-as interpret-as="date">2005-02-29</say-as>
</speak></code></pre>
                </section>
                <section>
                    <h3>Alexa Skills Kit Sound Library <a href="https://developer.amazon.com/de/docs/custom-skills/ask-soundlibrary.html"
                        target="_blank" class="infolink"></a></h3>
Die Bibliotkel stellt eine Anzahl von Effektsounds bereit. <br/> Die Einbindung erfolgt per Audio-Tag.                        
<pre><code class="xml"><speak>
    <audio src='https://s3.amazonaws.com/ask-soundlibrary/human/amzn_sfx_baby_cry_02.mp3'>
    </audio></speak>
</code></pre>
Es können auch eigene Sounds integriert werden. Die Quelle muss per HTTPS erreichbar sein. Die maximale Länge beträgt 90 Sekunden.
<br/>
Technische Vorgabe: MP3-Format, 48kbps, 16kHz.
                </section>
                <section>
                        <h3>Speechcons <a href="https://developer.amazon.com/de/docs/custom-skills/speechcon-reference-interjections-german.html"
                            target="_blank" class="infolink"></a></h3>
                        Speechcons sind Formulierungen die speziell betont werden. <br/> Die Auswahl ist sprachabhängig.
                        <pre><code class="xml"><speak>
    <say-as interpret-as="interjection">ähm</say-as>
</speak></code></pre>
<pre><code class="xml"><speak>
    <say-as interpret-as="interjection">achtung</say-as>
    der Kaffee ist heiß!
</speak></code></pre>
                    </section>
                <section>
                    <h3>Benutzer-Authentifizeriung</h3>
                    In der Session bzw. im Context  wird die UserId übermittelt.
<pre><code class="json">{
"version": "1.0",
    "session": {
    "user": {
        "userId": "amzn1.ask.account.AGLYCESV47M..."
        }
},
"context": {
    "System": {
        "user": {
            "userId": "amzn1.ask.account.AGLYCESV47M..."
            }
        }
    }
}</code></pre>
                </section>
                <section>
                    <h3>Zustandverwaltung</h3>
                    Die Aufrufe des Backends sind per Default zustandslos.
                    <br />
                    <h4>Externe Speicherung</h4>
                    Je Konversation wird eine Session-Id erstellt und bei jedem Aufruf übertragen. Die Id kann als Key für einen extere Datenspeicher (Redis, S3, ...) dienen.
<pre><code class="json">{
    "version": "1.0",
        "session": {
            "new": true,
                "sessionId": "amzn1.echo-api.session.eaa1",
            }
}</code></pre>
Das Flag <i>new</i> informiert ob es der erste Aufrufe der Konversation ist.
                </section>
                <section>
                    <h4>Interne Speicherung</h4>
                    Für kleine Datenmengen kann der Key-Value-Store <i>SessionAttributes</i> verwendet werden.
                    <br />
                    <br />
                    Dieser steht im Request und Respone zur Verfügung.
                    <pre><code class="json">{
    "version": "1.0",
    "sessionAttributes": {
        "key1": "value1",
        "key2": "value2"
    }
}</code></pre>
Der Zugriff auf die Werte wird i.d.R durch die APIs bereitgestellt.
                </section>
                <!--
                <section>
                    <h3>Empfehlungen</h3>
                    <ul>
                        <li>Gestalte die Rückgaben abwechslungsreich</li>
                        <li>Gibt dem Anwender Informationen über mögliche Optionen</li>

                    </ul>

                </section>
            -->
                <section>
                    <h3>Szenario Scrum-Planer (Backend)</h3>
                    Es soll eine Voice-UI zur Planung der Scum-Meeting erstellt werden.<br />
                    Das Entwickler-Team soll<br />
                    <ul>
                        <li>Termine erstellen</li>
                        <li>Termin(e) nennen</li>
                        <li>Mitarbeiter zum Termin einladen</li>
                        <li>Mitarbeiter aus Termin entfernen</li>
                    </ul>
                    <br />
                    <br />
                    Randbedingungen<br/>
                    Srum-Meetings: Sprint Planning, Sprint Retrospective und Sprint Review<br />
                    Jeder Mitarbeiter ist per Vorname eindeutig zu identifizieren.
                </section>
            </section>
            <section>
                <section>
                    <h2>Integration externer Systeme</h2>
                </section>
                <section>
                    <h3>VSTS-Build-Status (Backend)</h3>
                    https://www.visualstudio.com/en-us/docs/integrate/api/build/builds
                </section>
                <section>
                    <h3>Mail-Status (Backend)</h3>
                    https://github.com/jstedfast/MailKit
                </section>
            </section>
            <!--
            <section>
                <h2>Smarthome</h2>
            </section>
        -->
        </div>
    </div>
    <script src="./common/lib/js/head.min.js"></script>
    <script src="./common/js/reveal.js"></script>

    <script>
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            center: true,
            width: 1250,
            height: 720,
            slideNumber: true,
            margin: 0.0,

            menu: {
                side: 'left',

                titleSelector: 'h1, h2, h3, h4, h5, h6',
                hideMissingTitles: false,
                markers: false,
                custom: false,
                themes: [
                    { name: 'Black', theme: './common/css/theme/black.css' },
                    { name: 'White', theme: './common/css/theme/white.css' },
                    { name: 'League', theme: './common/css/theme/league.css' },
                    { name: 'Sky', theme: './common/css/theme/sky.css' },
                    { name: 'Beige', theme: './common/css/theme/beige.css' },
                    { name: 'Simple', theme: './common/css/theme/simple.css' },
                    { name: 'Serif', theme: './common/css/theme/serif.css' },
                    { name: 'Blood', theme: './common/css/theme/blood.css' },
                    { name: 'Night', theme: './common/css/theme/night.css' },
                    { name: 'Moon', theme: './common/css/theme/moon.css' },
                    { name: 'Solarized', theme: './common/css/theme/solarized.css' }
                ],

                transitions: true,
                openButton: true,
                openSlideNumber: false,
                keyboard: true,
                sticky: false,
                autoOpen: true
            },

            // More info https://github.com/hakimel/reveal.js#dependencies
            dependencies: [
                { src: './common/lib/js/classList.js', condition: function () { return !document.body.classList; } },
                { src: './common/plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: './common/plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: './common/plugin/notes/notes.js', async: true },
                { src: './common/plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } },
                { src: './common/plugin/zoom-js/zoom.js', async: true },
                { src: './common/plugin/notes/notes.js', async: true },
                { src: './common/plugin/menu/menu.js', async: true }
            ]
        });
    </script>
</body>


</html>